var yapl;!function(a){var b=function(){function a(a,b){this.element=a,this.active=b,this.opened=!1,this.present=b}return a.prototype.width=function(){return this.active?this.element.width():0},a.prototype.height=function(){return this.active?this.element.height():0},a.prototype.show=function(){this.active=!0,this.element&&this.element.show()},a.prototype.hide=function(){this.active=!1,this.opened=!1,this.element&&this.element.hide()},a.prototype.whenOpened=function(){this.opened||(this.opened=!0,this.onOpen&&this.onOpen())},a.prototype.whenClosed=function(){this.opened&&(this.opened=!1,this.onClose&&this.onClose())},a}();a.Panel=b}(yapl||(yapl={}));var yetAnotherPanelsLibrary=function(){function a(a,b){this.options=$.extend({autoHideOnClose:!0,mainPanelMask:!0,animationDuration:300},b),a.show(),a.addClass("yapl_panel"),this.scroller=a.parent(),this.wrapper=this.scroller.parent(),this.mainPanel=new yapl.Panel(a,!0),this.topPanel=new yapl.Panel(null,!1),this.rightPanel=new yapl.Panel(null,!1),this.bottomPanel=new yapl.Panel(null,!1),this.leftPanel=new yapl.Panel(null,!1),this.autoHideOnClose=this.options.autoHideOnClose;var c=this.autoHideOnClose;this.updateView(),this.iscroll=new IScroll(this.wrapper.get(0),$.extend({mouseWheel:!1,scrollX:!0,scrollY:!0,snap:".yapl_panel"},{bounceTime:b.bounceTime,bounceEasing:b.bounceEasing,preventDefaultException:b.preventDefaultException}));var d=this;$(window).on("resize ready",function(){d.updateView(),d.iscroll.scrollToElement(a.get(0))}),this.mainPanelMask=this.options.mainPanelMask?$('<div class="yapl_mask"></div>').css({position:"absolute",zIndex:1e4}).hide().on("click touchstart",function(a){a.preventDefault()}).appendTo(this.scroller):$(),this.iscroll.on("scrollEnd",function(){var a=!1,b=!1;d.leftPanel.active&&(0!=this.x||d.leftPanel.opened?0!=this.x&&d.leftPanel.opened&&(d.leftPanel.whenClosed(),a=!0,c&&!d.leftPanel.present&&d.leftPanel.hide()):(d.leftPanel.whenOpened(),b=!0)),d.topPanel.active&&(0!=this.y||d.topPanel.opened?0!=this.y&&d.topPanel.opened&&(d.topPanel.whenClosed(),a=!0,c&&!d.topPanel.present&&d.topPanel.hide()):(d.topPanel.whenOpened(),b=!0)),d.rightPanel.active&&(this.x<0&&!d.rightPanel.opened?(d.rightPanel.whenOpened(),b=!0):this.x>=0&&d.rightPanel.opened&&(d.rightPanel.whenClosed(),a=!0,c&&!d.rightPanel.present&&d.rightPanel.hide())),d.bottomPanel.active&&(this.y<0&&!d.bottomPanel.opened?(d.bottomPanel.whenOpened(),b=!0):this.y>=0&&d.bottomPanel.opened&&(d.bottomPanel.whenClosed(),a=!0,c&&!d.bottomPanel.present&&d.bottomPanel.hide())),b&&d.mainPanelMask.show(),a&&(d.mainPanelMask.hide(),d.topPanel.present&&!d.topPanel.active&&d.topPanel.show(),d.rightPanel.present&&!d.rightPanel.active&&d.rightPanel.show(),d.bottomPanel.present&&!d.bottomPanel.active&&d.bottomPanel.show(),d.leftPanel.present&&!d.leftPanel.active&&d.leftPanel.show(),d.updateView())})}return a.prototype.generatePanel=function(a,b,c,d){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),b?a.show():a.hide(),a.addClass("yapl_panel");var e=new yapl.Panel(a,b);return e.onOpen=c,e.onClose=d,e},a.prototype.updateView=function(){var a=this.leftPanel.width(),b=this.rightPanel.width(),c=this.topPanel.height(),d=this.bottomPanel.height(),e=this.wrapper.width(),f=this.wrapper.height();if($(this.mainPanel.element).add(this.mainPanelMask).width(e).height(f).css({top:c,left:a}),this.leftPanel.active&&this.leftPanel.element.height(f).css("top",c),this.rightPanel.active&&this.rightPanel.element.height(f).css({top:c,left:a+e}),this.topPanel.active&&this.topPanel.element.width(e).css("left",a),this.bottomPanel.active&&this.bottomPanel.element.width(e).css({top:c+f,left:a}),this.scroller.width(a+e+b).height(c+f+d),this.iscroll){var g=this.iscroll;window.setTimeout(function(){g.refresh()},0)}return this},a.prototype.setTopPanel=function(a,b,c,d){return"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),this.topPanel=this.generatePanel(a,b,c,d),this},a.prototype.setRightPanel=function(a,b,c,d){return"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),this.rightPanel=this.generatePanel(a,b,c,d),this},a.prototype.setBottomPanel=function(a,b,c,d){return"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),this.bottomPanel=this.generatePanel(a,b,c,d),this},a.prototype.setLeftPanel=function(a,b,c,d){return"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),this.leftPanel=this.generatePanel(a,b,c,d),this},a.prototype.showPanel=function(a){a.show(),this.updateView();var b=this.iscroll,c=this.mainPanelMask,d=this.options.animationDuration,e=b.options.bounceEasing;window.setTimeout(function(){b.scrollToElement(a.element.get(0),d,void 0,void 0,e),a.whenOpened(),c.show()},0)},a.prototype.showTopPanel=function(){this.topPanel.opened||(this.disablePanels(),this.showPanel(this.topPanel))},a.prototype.showRightPanel=function(){this.rightPanel.opened||(this.disablePanels(),this.showPanel(this.rightPanel))},a.prototype.showBottomPanel=function(){this.bottomPanel.opened||(this.disablePanels(),this.showPanel(this.bottomPanel))},a.prototype.showLeftPanel=function(){this.leftPanel.opened||(this.disablePanels(),this.showPanel(this.leftPanel))},a.prototype.disablePanels=function(){this.topPanel.hide(),this.rightPanel.hide(),this.bottomPanel.hide(),this.leftPanel.hide()},a}();